<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Station MÃ©tÃ©o ConnectÃ©e</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <!-- En-tÃªte -->
    <header>
      <h1>ğŸŒ¡ï¸ Station MÃ©tÃ©o ConnectÃ©e</h1>
      <p class="subtitle">HETIC WEB3 - DonnÃ©es en temps rÃ©el</p>
    </header>

    <!-- Statut de connexion -->
    <div class="status-bar">
      <div class="status-item">
        <span class="status-label">Connexion WebSocket</span>
        <div class="status-indicator" id="wsStatus">DÃ©connectÃ©</div>
      </div>
      <div class="status-item">
        <span class="status-label">Mode ESP32</span>
        <div id="simulationMode" class="simulation-badge">Mode simulation</div>
      </div>
      <div class="status-item">
        <span class="status-label">DerniÃ¨re mise Ã  jour</span>
        <div id="lastUpdate">-- : --</div>
      </div>
    </div>

    <!-- Affichage des donnÃ©es -->
    <main class="dashboard">
      <!-- Carte TempÃ©rature -->
      <div class="sensor-card temperature-card">
        <div class="card-icon">ğŸŒ¡ï¸</div>
        <div class="card-content">
          <h2>TempÃ©rature</h2>
          <div class="value" id="tempValue">-- Â°C</div>
          <p class="unit-toggle">
            <button class="unit-btn" onclick="changeUnit('C')" id="btnCelsius">Â°C</button>
            <button class="unit-btn" onclick="changeUnit('F')" id="btnFahrenheit">Â°F</button>
          </p>
        </div>
      </div>

      <!-- Carte HumiditÃ© -->
      <div class="sensor-card humidity-card">
        <div class="card-icon">ğŸ’§</div>
        <div class="card-content">
          <h2>HumiditÃ©</h2>
          <div class="value" id="humidityValue">-- %</div>
          <div class="humidity-bar">
            <div class="humidity-fill" id="humidityBar" style="width: 0%"></div>
          </div>
        </div>
      </div>
    </main>

    <!-- Historique des donnÃ©es -->
    <section class="history-section">
      <h3>ğŸ“Š Historique rÃ©cent</h3>
      <div class="data-table">
        <div class="table-header">
          <div class="col">Heure</div>
          <div class="col">TempÃ©rature</div>
          <div class="col">HumiditÃ©</div>
          <div class="col">UnitÃ©</div>
        </div>
        <div id="dataTableBody" class="table-body">
          <div class="empty-message">En attente de donnÃ©es...</div>
        </div>
      </div>
    </section>

    <!-- Information de dÃ©buggage -->
    <section class="debug-section">
      <h3>ğŸ”§ Informations techniques</h3>
      <div class="debug-info">
        <p><strong>Broker MQTT:</strong> captain.dev0.pandor.cloud:1884</p>
        <p><strong>Topic Data:</strong> station/meteo/data</p>
        <p><strong>Topic Command:</strong> station/meteo/command</p>
        <p><strong>Bridge WebSocket:</strong> <span id="wsUrl">ws://localhost:3001</span></p>
        <p id="debugMessage" class="debug-message"></p>
      </div>
    </section>
  </div>

  <script src="app.js"></script>
</body>
</html>
